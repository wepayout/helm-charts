apiVersion: karpenter.sh/v1alpha5
kind: Provisioner
metadata:
  name: {{ include "provisioner.fullname" . }}
spec:
  providerRef:
    name: {{ .Values.nodeTemplateName }}

  {{- with .Values.taints }}
  taints:
    {{- toYaml . | nindent 4 }}
  {{- end }}

  {{- with .Values.labels }}
  labels:
    {{- toYaml . | nindent 4 }}
  {{- end }}

  {{- with .Values.annotations }}
  annotations:
    {{- toYaml . | nindent 4 }}
  {{- end }}

  {{- with .Values.requirements }}
  requirements:
    {{- toYaml . | nindent 4 }}
  {{- end }}

  {{- with .Values.kubeletConfiguration }}
  kubeletConfiguration:
    {{- toYaml . | nindent 4 }}
  {{- end }}

  {{- with .Values.limits }}
  limits:
    {{- toYaml . | nindent 4 }}
  {{- end }}

  {{- with .Values.consolidation }}
  consolidation:
    {{- toYaml . | nindent 4 }}
  {{- end }}

  {{- with .Values.ttlSecondsUntilExpired }}
  ttlSecondsUntilExpired:
    {{- toYaml . | nindent 4 }}
  {{- end }}

  {{- with .Values.ttlSecondsAfterEmpty }}
  ttlSecondsAfterEmpty:
    {{- toYaml . | nindent 4 }}
  {{- end }}
